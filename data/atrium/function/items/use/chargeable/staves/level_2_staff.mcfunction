# Runs from hold_chargeable_item
#
# If there are items in the two left-most slot and the right-most slot of your hotbar that are not power slots, drop them.
execute if data entity @s {Inventory:[{Slot:0b}]} unless data entity @s {Inventory:[{Slot:0b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_0
execute if data entity @s {Inventory:[{Slot:8b}]} unless data entity @s {Inventory:[{Slot:8b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_8
execute if data entity @s {Inventory:[{Slot:1b}]} unless data entity @s {Inventory:[{Slot:1b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_1
execute if data entity @s {Inventory:[{Slot:7b}]} unless data entity @s {Inventory:[{Slot:7b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_7
# 
# Now that the slots are empty (items cannot be picked up again for 2 ticks), give the caster their spell options.
#
#   
# Air | Slot 0: Air Sigil II | Slot 8: Increase Velocity II | Slot 1: Inhale I | Slot 7: Exhale I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_air_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"A 1-block radius wind column"},{text:"is created at your location for"},{text:"24 seconds. The column"},{text:"levitates entities for "},{text:"3.5 seconds each time they enter"},{text:"the column. Additionally,"},{text:"the column causes arrows"},{text:"that fly into it to be"},{text:"thrown directly upwards."}],minecraft:item_name={text:"Spell: Air Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_increase_velocity"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Grants the caster Jump Boost II"},{text:"for 120 seconds, or Speed II"},{text:"for 120 seconds if the caster"},{text:"is Sprinting."}],minecraft:item_name={text:"Spell: Increase Velocity II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_inhale"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell creates a burst"},{text:"of air in a line 8.5 blocks"},{text:"long and 2.5 blocks wide"},{text:"emenating from the caster."},{text:"Non-player entities caught"},{text:"in the line are dragged"},{text:"towards the caster."}],minecraft:item_name={text:"Spell: Inhale I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_exhale"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell creates a burst"},{text:"of air in a line 8.5 blocks"},{text:"long and 2.5 blocks wide"},{text:"emenating from the caster."},{text:"Non-player entities caught"},{text:"in the line thrown away"},{text:"from the caster."}],minecraft:item_name={text:"Spell: Exhale I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1
#
# Earth | Slot 0: Earth Sigil II | Slot 8: Natural Armor II | Slot 1: Locate Ore I | Slot 7: Conjure Tree I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_earth_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Ask the little stone sprites "},{text:"for help. They idle for "},{text:"24 seconds, and anyone "},{text:"who stands near them gains "},{text:"Haste I for 4 minutes."}],minecraft:item_name={text:"Spell: Earth Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_natural_armor"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell grants you magical"},{text:"armor. Provided you are"},{text:"not wearing physical"},{text:"armor, you gain Resistance III"},{text:"for 30 minutes."}],minecraft:item_name={text:"Spell: Natural Armor II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}]
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_locate_ore"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Sends out vibrations in a 9x9"},{text:"cube centered on the caster."},{text:"Any ore blocks within the"},{text:"cube are illuminated for"},{text:"30 seconds, allowing the"},{text:"caster to easily locate them."}],minecraft:item_name={text:"Spell: Locate Ore I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_conjure_tree"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Conjures a small tree, as the"},{text:"name might imply. The conjured"},{text:"tree is fleeting, and will"},{text:"vanish after 2 minutes of life."},{text:"This spell may only conjure"},{text:"trees and tree-like plants"},{text:"if the ground in front of the"},{text:"caster can support such growth."}],minecraft:custom_name={text:"Spell: Conjure Tree I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1
#
# Fire | Slot 0: Fire Sigil II | Slot 8: Throw Flames II | Slot 1: Flare I | Slot 7: Stoke Furnace I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_fire_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Burns a symbol into the ground"},{text:"on casting. 12 seconds later,"},{text:"it bursts into flame in a "},{text:"2-block radius; Any entities "},{text:"caught in the radius"},{text:"are set on fire."}],minecraft:item_name={text:"Spell: Fire Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_throw_flames"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"You hurl flames at your foes."},{text:"Any entity in an 8-block cone "},{text:"in front of you is set on fire."}],minecraft:item_name={text:"Spell: Throw Flames II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}]
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_flare"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Creates a flare above the"},{text:"caster's head that illuminates"},{text:"the area for 2 minutes."},{text:"The flare cannot be extinguished"},{text:"by water, but goes out"},{text:"if a block is placed on it."}],minecraft:item_name={text:"Spell: Flare I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_stoke_furnace"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Causes the flames within"},{text:"a single Furnace, Blast Furnace"},{text:"or Smoker in front of the"},{text:"caster to burn hotter; The spell"},{text:"fuels the block as much"},{text:"as a Lava Bucket would."}],minecraft:item_name={text:"Spell: Stoke Furnace I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1
#
# Water | Slot 0: Water Sigil II | Slot 8: Extinguish II | Slot 1: Turn Tide I | Slot 7: Undercurrent I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_water_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Summons a raincloud that lasts"},{text:"2 minutes. While the rain falls,"},{text:"Beets, Carrots, Potatoes"},{text:"and Wheat grow at an"},{text:"accelerated rate within a"},{text:"3x3 square."}],minecraft:item_name={text:"Spell: Water Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_extinguish"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Any entities within a 10-block"},{text:"radius of the caster that"},{text:"are burning are extinguished."}],minecraft:item_name={text:"Spell: Extinguish II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}]
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_turn_tide"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Heals one living target"},{text:"within 6 blocks of the"},{text:"caster that is touching Water."},{text:"The target restores 4 of its"},{text:"lost Hearts and is cured"},{text:"of any Poison affecting it."}],minecraft:item_name={text:"Spell: Turn Tide I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_undercurrent"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Creates a bubble column which"},{text:"pushes the caster upwards,"},{text:"or pulls the caster downwards"},{text:"if the caster is Sneaking."},{text:"This spell has no effect"},{text:"unless the caster is underwater."}],minecraft:item_name={text:"Spell: Undercurrent I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1
#
# Time | Slot 0: Time Sigil II | Slot 8: Desync II | Slot 1: Extend Duration I | Slot 7: Rewind Item I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_time_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Conjures a symbol of power."},{text:"12 seconds after casting,"},{text:"each entity within a"},{text:"3-block radius of the sigil"},{text:"is afflicted with Slowness III"},{text:"and gains Slow Falling."},{text:"Both effects last for"},{text:"40 seconds."}],minecraft:item_name={text:"Spell: Time Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_desync"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Creates a circle of slow time."},{text:"Entities that enter the"},{text:"outside of the circle"},{text:" are afflicted with"},{text:"Slowness II, while entities"},{text:"in the center of the circle"},{text:"gain Speed II."},{text:"The circle lasts 30 seconds."}],minecraft:item_name={text:"Spell: Desync II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_extend_duration"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Slows an aspect of your"},{text:"metabolism; The effects of the"},{text:"next potion you drink will"},{text:"last for double its"},{text:"listed duration."},{text:"This spell is not powerful"},{text:"enough to affect"},{text:"tier 3 potions."}],minecraft:item_name={text:"Spell: Extend Duration I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_rewind_item"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"3 seconds after casting,"},{text:"sends the item you hold"},{text:"back in time; The item has"},{text:"100% of its durability restored."},{text:"Each time you cast this"},{text:"on the same item, the amount"},{text:"of durability restored"},{text:"is reduced by 20%."}],minecraft:item_name={text:"Spell: Rewind Item I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1
#
# Space | Slot 0: Space Sigil II | Slot 8: Parallax II | Slot 1: Arcane Ward I | Slot 7: Pocket Item I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_space_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Etches an arcane anchor"},{text:"into the ground. 15 seconds"},{text:"later space folds itself,"},{text:"returning you to the sigil"},{text:"instantly."}],minecraft:item_name={text:"Spell: Space Sigil II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_parallax"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Banishes one entity you are"},{text:"looking at within 3 blocks"},{text:"to a pocket dimension for "},{text:"8 seconds."}],minecraft:item_name={text:"Spell: Parallax II","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}]
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.1 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_arcane_ward"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Creates a 3x3 wall of"},{text:"force 3 blocks ahead of"},{text:"where the caster is looking."},{text:"This wall lasts for 10"},{text:"seconds before vanishing."}],minecraft:item_name={text:"Spell: Arcane Ward I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:1b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.7 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_pocket_item"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"3 seconds after casting,"},{text:"sends the item you hold"},{text:"into a pocket dimension;"},{text:"The item is teleported"},{text:"into the first available"},{text:"slot in your Ender Chest."}],minecraft:item_name={text:"Spell: Pocket Item I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:7b}] 1