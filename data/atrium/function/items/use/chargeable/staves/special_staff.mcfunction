# Runs from hold_chargeable_item
#
# If there are items in the left-most slot and the right-most slot of your hotbar that are not power slots, drop them.
# If there is an item in the center slot, drop it too.
execute if data entity @s {Inventory:[{Slot:0b}]} unless data entity @s {Inventory:[{Slot:0b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_0
execute if data entity @s {Inventory:[{Slot:8b}]} unless data entity @s {Inventory:[{Slot:8b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_8
execute if data entity @s {Inventory:[{Slot:4b}]} unless data entity @s {Inventory:[{Slot:4b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_4
# Now that the slots are empty (items cannot be picked up again for 2 ticks), give the caster their spell options.
#
# Frigid Staff | Slot 0: Air Sigil III | Slot 8: Extinguish III | Slot 4: Blizzard
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_frigid_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_air_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"A 1-block radius wind column"},{text:"is created at your location for"},{text:"24 seconds. The column"},{text:"levitates entities for "},{text:"4.5 seconds each time they enter"},{text:"the column. Additionally,"},{text:"the column causes arrows"},{text:"that fly into it to be"},{text:"thrown directly upwards."}],minecraft:item_name={text:"Spell: Air Sigil III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_frigid_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_extinguish"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Any entities within a 15-block"},{text:"radius of the caster that"},{text:"are burning are extinguished."}],minecraft:item_name={text:"Spell: Extinguish III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_frigid_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_blizzard"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Surrounds the caster with"},{text:"a freezing blizzard for"},{text:"45 seconds. Any entities that"},{text:"are susceptible to freezing"},{text:"within 10 blocks of you"},{text:"are under the effects of"},{text:"Powder Snow. You need not"},{text:"hold the staff to maintain this."}],minecraft:item_name={text:"Spell: Blizzard","color":"aqua"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1
# Melodic Staff | Slot 0: Inspire | Slot 8: Hush | Slot 4: Song
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_melodic_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_inspire"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"You play the horn built"},{text:"into this staff, inspiring"},{text:"your allies and focusing on your"},{text:"foes. Each friendly mob within"},{text:"30 blocks gains Absorption I,"},{text:"while Raiders are afflicted"},{text:"with Glowing. Both effects"},{text:"last for 1 minute."}],minecraft:item_name={text:"Spell: Inspire","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_melodic_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_hush"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"You take advantage of"},{text:"the silence. Each player within 20 blocks"},{text:"who is Sneaking gains"},{text:"Haste II and Speed II for up to"},{text:"3 minutes (if they continue Sneaking)."}],minecraft:item_name={text:"Spell: Hush","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_melodic_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_song"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"3 seconds after casting,"},{text:"a Music Disc you hold is"},{text:"magically enhanced; As its song plays,"},{text:"each entity within 15 blocks"},{text:"is affected by the tone of"},{text:"the song. Each Disc has different"},{text:"effects. You need not"},{text:"hold the staff to maintain this."}],minecraft:item_name={text:"Spell: Song","color":"dark_aqua"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1
# Mercurial Staff | Slot 0: Destabilize Item | Slot 8: Fizzle Spell | Slot 4: Catalyze
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_mercurial_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_destabilize_item"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"3 seconds after casting,"},{text:"this spell disassembles a"},{text:"tool or piece of armor you"},{text:"hold in your main hand"},{text:"back into its component parts."}],minecraft:item_name={text:"Spell: Destabilize Item","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_mercurial_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_fizzle_spell"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell can scramble arcane"},{text:"spells cast by another target"},{text:"within 15 blocks."},{text:"The next spell the target"},{text:"casts takes twice as long."},{text:"Alternatively, you may Fizzle"},{text:"a single ongoing spell effect"},{text:"within 5 blocks, such as a"},{text:"Sigil, Conjured Tree, or Arcane Ward."}],minecraft:item_name={text:"Spell: Fizzle Spell","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_mercurial_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_catalyze"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell enhances potion"},{text:"effects. The nearest target"},{text:"you are looking at will have"},{text:"all its potion effects increased"},{text:"by I for half the effect's duration."},{text:"If no valid target is found,"},{text:"this spell will target"},{text:"the caster instead."}],minecraft:item_name={text:"Spell: Catalyze","color":"dark_purple"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1
# Molten Staff | Slot 0: Earth Sigil III | Slot 8: Throw Flames III | Slot 4: Eruption
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_molten_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_earth_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Ask the little stone sprites "},{text:"for help. They idle for "},{text:"36 seconds, and anyone "},{text:"who stands near them gains "},{text:"Haste II for 8 minutes."}],minecraft:item_name={text:"Spell: Earth Sigil III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_molten_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_throw_flames"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"You hurl flames at your foes."},{text:"Any entity in a 12-block cone "},{text:"in front of you is set on fire."}],minecraft:item_name={text:"Spell: Throw Flames III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_molten_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_eruption"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Unleashes a volcanic cloud of"},{text:"choking smoke and magma."},{text:"For the next minute, any entity"},{text:"unfortunate enough to be under it"},{text:"takes Magma damage and"},{text:"has a chance of catching"},{text:"a Blaze's fireball!"}],minecraft:item_name={text:"Spell: Eruption","color":"gold"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1
# Verdant Staff | Slot 0: Water Sigil III | Slot 8: Natural Armor III | Slot 4: Cure
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_verdant_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_water_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Summons a raincloud that lasts"},{text:"5 minutes. While the rain falls,"},{text:"Beets, Carrots, Potatoes"},{text:"and Wheat grow at an"},{text:"accelerated rate within a"},{text:"3x3 square."}],minecraft:item_name={text:"Spell: Water Sigil III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_verdant_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_natural_armor"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell grants you magical"},{text:"armor. Provided you are"},{text:"not wearing physical"},{text:"armor, you gain Resistance III"},{text:"for 60 minutes."}],minecraft:item_name={text:"Spell: Natural Armor III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}]
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_verdant_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_cure"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell has the ability"},{text:"to return a single Zombie Villager"},{text:"to life within 5 blocks in 20 seconds."},{text:"The process is otherwise identical"},{text:"to using a Golden Apple, except"},{text:"the Zombie Villager does not"},{text:"need to be afflicted by Weakness."}],minecraft:item_name={text:"Spell: Cure","color":"dark_green"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1
# Voltaic Staff | Slot 0: Fire Sigil III | Slot 8: Increase Velocity III | Slot 4: Thunderbolt
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_voltaic_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_fire_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Burns a symbol into the ground"},{text:"on casting. 12 seconds later,"},{text:"it bursts into flame in a "},{text:"3-block radius; Any entities "},{text:"caught in the radius"},{text:"are set on fire."}],minecraft:item_name={text:"Spell: Fire Sigil III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_voltaic_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_increase_velocity"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Grants the caster Jump Boost III"},{text:"for 120 seconds, or Speed III"},{text:"for 120 seconds if the caster"},{text:"is Sprinting."}],minecraft:item_name={text:"Spell: Increase Velocity III","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_voltaic_staff:1b}}}}} run item replace entity @s hotbar.4 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_thunderbolt"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"1 second after casting, this"},{text:"spell summons a lightning bolt!"},{text:"As the staff is summoning it,"},{text:"it is advised to cast this"},{text:"spell while Sprinting."},{text:"Note: Fighting Creepers with"},{text:"lightning is not advised."}],minecraft:item_name={text:"Spell: Thunderbolt","color":"#FF9D25"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:4b}] 1