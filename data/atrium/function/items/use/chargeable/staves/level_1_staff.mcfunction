# Runs from hold_chargeable_item
#
# If there are items in the left-most slot and the right-most slot of your hotbar that are not power slots, drop them.
execute if data entity @s {Inventory:[{Slot:0b}]} unless data entity @s {Inventory:[{Slot:0b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_0
execute if data entity @s {Inventory:[{Slot:8b}]} unless data entity @s {Inventory:[{Slot:8b,components:{"minecraft:custom_data":{atrium_power:1b}}}]} run function atrium:items/slot_control/drop_item_8
#
# Now that the slots are empty (items cannot be picked up again for 2 ticks), give the caster their spell options.
#
#
# Air | Slot 0: Air Sigil I | Slot 8: Increase Velocity I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_air_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"A 1-block radius wind column"},{text:"is created at your location for"},{text:"12 seconds. The column"},{text:"levitates entities for "},{text:"2.5 seconds each time they enter"},{text:"the column. Additionally,"},{text:"the column causes arrows"},{text:"that fly into it to be"},{text:"thrown directly upwards."}],minecraft:item_name={text:"Spell: Air Sigil I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_air_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_increase_velocity"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Grants the caster Jump Boost I"},{text:"for 60 seconds, or Speed I"},{text:"for 60 seconds if the caster"},{text:"is Sprinting."}],minecraft:item_name={text:"Spell: Increase Velocity I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
#
# Earth | Slot 0: Earth Sigil I | Slot 8: Natural Armor I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_earth_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Ask the little stone sprites "},{text:"for help. They idle for "},{text:"12 seconds, and anyone "},{text:"who stands near them gains "},{text:"Haste I for 2 minutes."}],minecraft:item_name={text:"Spell: Earth Sigil I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_earth_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_natural_armor"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"This spell grants you magical"},{text:"armor. Provided you are"},{text:"not wearing physical"},{text:"armor, you gain Resistance III"},{text:"for 15 minutes."}],minecraft:item_name={text:"Spell: Natural Armor I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
#
# Fire | Slot 0: Fire Sigil I | Slot 8: Throw Flames I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_fire_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Burns a symbol into the ground"},{text:"on casting. 12 seconds later,"},{text:"it bursts into flame in a "},{text:"1-block radius; Any entities "},{text:"caught in the radius"},{text:"are set on fire."}],minecraft:item_name={text:"Spell: Fire Sigil I","color":"gray"},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_fire_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_throw_flames"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"You hurl flames at your foes."},{text:"Any entity in a 5-block cone "},{text:"in front of you is set on fire."}],minecraft:item_name={text:"Spell: Throw Flames I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
#
# Water | Slot 0: Water Sigil I | Slot 8: Extinguish I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_water_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Summons a raincloud that lasts"},{text:"1 minute. While the rain falls,"},{text:"Beets, Carrots, Potatoes"},{text:"and Wheat grow at an"},{text:"accelerated rate within a"},{text:"3x3 square."}],minecraft:item_name={text:"Spell: Water Sigil I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_water_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_extinguish"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Any entities within a 5-block"},{text:"radius of the caster that"},{text:"are burning are extinguished."}],minecraft:item_name={text:"Spell: Extinguish I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
#
# Time | Slot 0: Time Sigil I | Slot 8: Desync I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_time_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Conjures a symbol of power."},{text:"12 seconds after casting,"},{text:"each entity within a"},{text:"3-block radius of the sigil"},{text:"is afflicted with Slowness II"},{text:"and gains Slow Falling."},{text:"Both effects last for"},{text:"30 seconds."}],minecraft:item_name={text:"Spell: Time Sigil I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_time_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_desync"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Creates a circle of slow time."},{text:"Entities that enter the"},{text:"outside of the circle"},{text:" are afflicted with"},{text:"Slowness I, while entities"},{text:"in the center of the circle"},{text:"gain Speed II."},{text:"The circle lasts 30 seconds."}],minecraft:item_name={text:"Spell: Desync I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1
#
# Space | Slot 0: Space Sigil I | Slot 8: Parallax I
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.0 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_space_sigil"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Etches an arcane anchor"},{text:"into the ground. 10 seconds"},{text:"later space folds itself,"},{text:"returning you to the sigil"},{text:"instantly."}],minecraft:item_name={text:"Spell: Space Sigil I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:0b}] 1
execute if data entity @s {equipment:{offhand:{components:{"minecraft:custom_data":{atrium_space_staff:1b}}}}} run item replace entity @s hotbar.8 with minecraft:firework_star[minecraft:custom_model_data={strings:["atrium_ps_parallax"]},minecraft:lore=[{text:"When Cast:","color":"gray","italic":false},{text:"Banishes one entity you are"},{text:"looking at within 3 blocks"},{text:"to a pocket dimension for "},{text:"6 seconds."}],minecraft:item_name={text:"Spell: Parallax I","color":"gray","italic":false},minecraft:custom_data={atrium_power:1b,atrium_power_slot:8b}] 1