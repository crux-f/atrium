# Swaps out items for trades
# (Loot tables are always checking for the previous level)
# Level 2
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_stone_battleaxe:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:3},sell:{id:"minecraft:stone_axe",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_battleaxe"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 9 Attack Damage","color":"dark_green","italic":false}','{"text":" 0.8 Attack Speed","color":"dark_green","italic":false}','{"text":" "}','{"text":"When in Both Hands:","color":"gray","italic":false}','{"text":" 12 Attack Damage","color":"dark_green","italic":false}','{"text":" 0.8 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:-3.2d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:battleaxe_attack_speed"},{amount:9,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:battleaxe_base_attack_damage"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Stone Battleaxe"}',"minecraft:custom_data":{atrium_battleaxe:1b,atrium_stone_battleaxe:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_stone_dagger:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:2},sell:{id:"minecraft:stone_sword",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_dagger"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 2.5 Attack Damage","color":"dark_green","italic":false}','{"text":" 2.2 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:2.5d,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:dagger_attack_damage"},{amount:-1.8d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:dagger_attack_speed"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Stone Dagger"}',"minecraft:custom_data":{atrium_dagger:1b,atrium_stone_dagger:1b}}}}
# Level 2 or 3
# (Iron trades are only available if the villager is not in the nether)
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_iron_battleaxe:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:11},sell:{id:"minecraft:iron_axe",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_battleaxe"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 9 Attack Damage","color":"dark_green","italic":false}','{"text":" 0.9 Attack Speed","color":"dark_green","italic":false}','{"text":" "}','{"text":"When in Both Hands:","color":"gray","italic":false}','{"text":" 12 Attack Damage","color":"dark_green","italic":false}','{"text":" 0.9 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:-3.1d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:battleaxe_attack_speed"},{amount:9,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:battleaxe_base_attack_damage"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Iron Battleaxe"}',"minecraft:custom_data":{atrium_battleaxe:1b,atrium_iron_battleaxe:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_iron_dagger:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:7},sell:{id:"minecraft:iron_sword",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_dagger"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 3 Attack Damage","color":"dark_green","italic":false}','{"text":" 2.2 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:3,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:dagger_attack_damage"},{amount:-1.8d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:dagger_attack_speed"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Iron Dagger"}',"minecraft:custom_data":{atrium_dagger:1b,atrium_iron_dagger:1b}}}}
# (Gold trades are only available if the villager is in the nether)
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_golden_battleaxe:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:11},sell:{id:"minecraft:golden_axe",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_battleaxe"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 7 Attack Damage","color":"dark_green","italic":false}','{"text":" 1 Attack Speed","color":"dark_green","italic":false}','{"text":" "}','{"text":"When in Both Hands:","color":"gray","italic":false}','{"text":" 10 Attack Damage","color":"dark_green","italic":false}','{"text":" 1 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:-3,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:battleaxe_attack_speed"},{amount:7,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:battleaxe_base_attack_damage"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Golden Battleaxe"}',"minecraft:custom_data":{atrium_battleaxe:1b,atrium_golden_battleaxe:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_golden_dagger:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:7},sell:{id:"minecraft:golden_sword",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_dagger"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 2 Attack Damage","color":"dark_green","italic":false}','{"text":" 2.2 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:2,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:dagger_attack_damage"},{amount:-1.8d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:dagger_attack_speed"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Golden Dagger"}',"minecraft:custom_data":{atrium_dagger:1b,atrium_golden_dagger:1b}}}}
# Level 3
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_shield_unbreaking_3:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:3,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:shield",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:unbreaking":3}}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_village_defender:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:3,xp:4,priceMultiplier:0.1f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:iron_sword",count:1,components:{"minecraft:item_name":'"Village Defender"',"minecraft:enchantments":{levels:{"minecraft:bane_of_arthropods":3,"minecraft:smite":3,"minecraft:unbreaking":5}},"minecraft:custom_data":{atrium_village_defender:1b},"minecraft:custom_model_data":{strings:["atrium_village_defender"]},"minecraft:rarity":"uncommon"}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_battlement_bow:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:3,xp:4,priceMultiplier:0.1f,buy:{id:"minecraft:emerald",count:18},sell:{id:"minecraft:bow",count:1,components:{"minecraft:item_name":'"Battlement Bow"',"minecraft:enchantments":{levels:{"minecraft:power":2,"minecraft:punch":2}},"minecraft:custom_data":{atrium_battlement_bow:1b},"minecraft:rarity":"uncommon","minecraft:attribute_modifiers":[{id:"atrium:battlement_bow_armor",type:"armor",amount:3,operation:"add_value",slot:"mainhand"},{id:"atrium:battlement_bow_knockback_resistance",type:"knockback_resistance",amount:0.1,operation:"add_multiplied_base",slot:"mainhand"}]}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_sell_1_ominous_bottle:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:ominous_bottle",count:1},sell:{id:"minecraft:emerald",count:12}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_4_holy_arrow:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:8,xp:4,priceMultiplier:0.1f,buy:{id:"minecraft:emerald",count:4},sell:{id:"minecraft:tipped_arrow",count:4,components:{}}}
# Level 4
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_trident:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},sell:{id:"minecraft:trident",count:1}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_diamond_battleaxe:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:diamond_axe",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_battleaxe"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 9 Attack Damage","color":"dark_green","italic":false}','{"text":" 1 Attack Speed","color":"dark_green","italic":false}','{"text":" "}','{"text":"When in Both Hands:","color":"gray","italic":false}','{"text":" 12 Attack Damage","color":"dark_green","italic":false}','{"text":" 1 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:-3,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:battleaxe_attack_speed"},{amount:9,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:battleaxe_base_attack_damage"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Diamond Battleaxe"}',"minecraft:custom_data":{atrium_battleaxe:1b,atrium_diamond_battleaxe:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_diamond_dagger:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:6,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_dagger"]},"minecraft:lore":['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 3.5 Attack Damage","color":"dark_green","italic":false}','{"text":" 2.2 Attack Speed","color":"dark_green","italic":false}'],"minecraft:attribute_modifiers":{modifiers:[{amount:3.5d,operation:"add_value",slot:"mainhand",type:"attack_damage",id:"atrium:dagger_attack_damage"},{amount:-1.8d,operation:"add_value",slot:"mainhand",type:"attack_speed",id:"atrium:dagger_attack_speed"}],show_in_tooltip:0b},"minecraft:item_name":'{"text":"Diamond Dagger"}',"minecraft:custom_data":{atrium_dagger:1b,atrium_diamond_dagger:1b}}}}
# Level 5
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_miracle_buckler:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:48},buyB:{id:"minecraft:white_banner",count:1,components:{"minecraft:item_name":'{"color":"gold","translate":"block.minecraft.ominous_banner"}',"minecraft:banner_patterns":[{color:"cyan",pattern:"minecraft:rhombus"},{color:"light_gray",pattern:"minecraft:stripe_bottom"},{color:"gray",pattern:"minecraft:stripe_center"},{color:"light_gray",pattern:"minecraft:border"},{color:"black",pattern:"minecraft:stripe_middle"},{color:"light_gray",pattern:"minecraft:half_horizontal"},{color:"light_gray",pattern:"minecraft:circle"},{color:"black",pattern:"minecraft:border"}],"minecraft:hide_additional_tooltip":{}}},sell:{id:"minecraft:shield",count:1,components:{"minecraft:attribute_modifiers":{modifiers:[{amount:3,operation:"add_value",slot:"offhand",type:"armor",id:"atrium:miracle_buckler_armor_bonus"}]},"minecraft:rarity":"uncommon","minecraft:enchantments":{levels:{"minecraft:mending":1,"minecraft:unbreaking":4}},"minecraft:item_name":'{"text":"Miracle Buckler"}'}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_horn_of_valor:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:48},buyB:{id:"minecraft:white_banner",count:1,components:{"minecraft:item_name":'{"color":"gold","translate":"block.minecraft.ominous_banner"}',"minecraft:banner_patterns":[{color:"cyan",pattern:"minecraft:rhombus"},{color:"light_gray",pattern:"minecraft:stripe_bottom"},{color:"gray",pattern:"minecraft:stripe_center"},{color:"light_gray",pattern:"minecraft:border"},{color:"black",pattern:"minecraft:stripe_middle"},{color:"light_gray",pattern:"minecraft:half_horizontal"},{color:"light_gray",pattern:"minecraft:circle"},{color:"black",pattern:"minecraft:border"}],"minecraft:hide_additional_tooltip":{}}},sell:{id:"minecraft:goat_horn",count:1,components:{"minecraft:lore":['{"text":" "}','{"text":"When used:","color":"dark_purple","italic":false}','{"text":"Absorption I (00:25)","color":"blue","italic":false}','{"text":"to nearby allies","color":"blue","italic":false}'],"minecraft:instrument":"minecraft:sing_goat_horn","minecraft:rarity":"uncommon","minecraft:item_name":'{"text":"Horn of Valor"}',"minecraft:custom_data":{atrium_horn_of_valor:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_heavy_core:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.3f,buy:{id:"minecraft:emerald",count:48},buyB:{id:"minecraft:netherite_ingot",count:4},sell:{id:"minecraft:heavy_core",count:1}}