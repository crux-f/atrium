# Swaps out items for trades
# (Loot tables are always checking for the previous level)
# Level 2
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_sell_1_enchantment_catalyst_focusing:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:16,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:lapis_block",count:1,components:{"minecraft:enchantment_glint_override":true,"minecraft:lore":[{text:"Focusing","color":"blue","italic":false},{text:" "},{text:"Now that you have an"},{text:"enchantment you understand,"},{text:"it shouldn\t be too difficult"},{text:"to turn up the power a little..."}],"minecraft:item_name":{text:"Enchantment Catalyst"},"minecraft:custom_data":{atrium_catalyst_focusing:1b}}},sell:{id:"minecraft:emerald",count:8}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_sell_1_enchantment_catalyst_transforming:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:8,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:diamond_block",count:1,components:{"minecraft:enchantment_glint_override":true,"minecraft:lore":[{text:"Transforming","color":"dark_aqua","italic":false},{text:" "},{text:"Diamonds change the equation,"},{text:"somehow. It's the asis of"},{text:"this whole process. Now"},{text:"all you have to figure out"},{text:"is... Why."}],"minecraft:item_name":{text:"Enchantment Catalyst"},"minecraft:custom_data":{atrium_catalyst_transforming:1b}}},sell:{id:"minecraft:emerald",count:16}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_enchantment_catalysts_research:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:3,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:paper",count:1,components: {"minecraft:custom_model_data": {strings: ["atrium_codex_research"]}, "minecraft:item_name": '"Runic Research"', "minecraft:lore": [{"color":"gray","italic":false,"text":"Runic Codex Formulas:","underlined":true}, {"color":"gray","italic":false,"text":"Enchantment Catalyst [Transforming]"}, {"color":"gray","italic":false,"text":"Enchantment Catalyst [Focusing]"}], "minecraft:custom_data": {atrium_research: 1, atrium_research_type: "runic", atrium_topic: "enchantment_catalysts"}}}}
# Level 2 or 3
# Storybooks (enchanted books with extra lore flavor) - - -
# Storybooks are using the same logic as the Villager Trade Rebalance (since thats what our server uses) with 1 additional vanilla enchantment available per villager type.
#
# Desert
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fire_protection_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A simple water charm."},{text:"A sketch of an oasis"},{text:"is on the cover."}],"minecraft:stored_enchantments":{"minecraft:fire_protection":1},"minecraft:custom_data":{atrium_fire_protection_storyook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_thorns_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:10},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The runes are scratched"},{text:"into the pages so fiercely,"},{text:"the ack cover is torn."}],"minecraft:stored_enchantments":{"minecraft:thorns":1},"minecraft:custom_data":{atrium_thorns_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_infinity_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Reading it makes your"},{text:"head spin. Maye that's"},{text:"why the book has a padlock."}],"minecraft:stored_enchantments":{"minecraft:infinity":1},"minecraft:custom_data":{atrium_infinity_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_soul_speed_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Originally created to lay"},{text:"undead spirits to rest,"},{text:"it seems that it has"},{text:"other, stranger applications."},],"minecraft:stored_enchantments":{"minecraft:soul_speed":1},"minecraft:custom_data":{atrium_soul_speed_storyook:1b}}}}
# Plains
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_punch_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:10},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The nuanced, careful"},{text:"arrangement of runes is"},{text:"slightly undercut y the"},{text:"numerous doodles of "},{text:"arrowheads shaped like fists"},{text:"cluttering the margins."}],"minecraft:stored_enchantments":{"minecraft:punch":1},"minecraft:custom_data":{atrium_punch_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_smite_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Despite its righteous"},{text:"power, this enchantment"},{text:"is accompanied y"},{text:"solemn death rites."}],"minecraft:stored_enchantments":{"minecraft:smite":1},"minecraft:custom_data":{atrium_smite_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_bane_of_arthropods_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A collection of sketches"},{text:"documenting the weak"},{text:"points of various species"},{text:"of Spider, Silverfish, and"},{text:"even the elusive Endermite."}],"minecraft:stored_enchantments":{"minecraft:bane_of_arthropods":1},"minecraft:custom_data":{atrium_bane_of_arthropods_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_piercing_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Enchanters only cautiously"},{text:"sell these tomes."},{text:"They are typically saved"},{text:"for defense against raids."},],"minecraft:stored_enchantments":{"minecraft:piercing":1},"minecraft:custom_data":{atrium_piercing_storyook:1b}}}}
# Savanna
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_knockback_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:10},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The glyphs inscried within"},{text:"are written in glimmering"},{text:"redstone. Very pretty"},{text:"for what is essentially"},{text:"a magical shove."}],"minecraft:stored_enchantments":{"minecraft:knockback":1},"minecraft:custom_data":{atrium_knockback_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_curse_of_binding_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The pages of this cursed"},{text:"tome resist eing turned,"},{text:"as if made of lead."}],"minecraft:stored_enchantments":{"minecraft:binding_curse":1},"minecraft:custom_data":{atrium_curse_of_binding_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_sweeping_edge_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"This ingenious enchantment"},{text:"increases the velocity"},{text:"of the lade, allowing"},{text:"for more impact against"},{text:"multiple targets."}],"minecraft:stored_enchantments":{"minecraft:sweeping_edge":1},"minecraft:custom_data":{atrium_sweeping_edge_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_wind_burst_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:28},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A strong ward inds the"},{text:"winds within it, though"},{text:"only barely. When the"},{text:"book is open, a light breeze"},{text:"continually turns the pages."},],"minecraft:stored_enchantments":{"minecraft:wind_burst":1},"minecraft:custom_data":{atrium_wind_burst_storybook:1b}}}}
# Snow
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_aqua_affinity_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"This ook contains"},{text:"eldritch runes, interspersed"},{text:"with excited observations"},{text:"about marine biology."}],"minecraft:stored_enchantments":{"minecraft:aqua_affinity":1},"minecraft:custom_data":{atrium_aqua_affinity_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_looting_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An incomplete account of"},{text:"the history of illager raids."},{text:"Amidst the glyphs which"},{text:"inscrie the enchantment,"},{text:"the book warns against its"},{text:"misuse."}],"minecraft:stored_enchantments":{"minecraft:looting":1},"minecraft:custom_data":{atrium_looting_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_frost_walker_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A complex enchantment"},{text:"that only villagers know."},{text:"A true masterwork of"},{text:"water magic."}],"minecraft:stored_enchantments":{"minecraft:frost_walker":1},"minecraft:custom_data":{atrium_frost_walker_storyook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_swift_sneak_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An amitious recovery,"},{text:"this enchantment was unearthed"},{text:"directly from the ruins"},{text:"of a city deep below."},],"minecraft:stored_enchantments":{"minecraft:swift_sneak":1},"minecraft:custom_data":{atrium_swift_sneak_storybook:1b}}}}
# Taiga
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_blast_protection_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"There's a cat on the cover."},{text:"This doesn't only work on"},{text:"creepers, ut it definitely"},{text:"seems designed with them"},{text:"in mind."}],"minecraft:stored_enchantments":{"minecraft:blast_protection":1},"minecraft:custom_data":{atrium_blast_protection_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fire_aspect_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:10},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An aspect of the four"},{text:"elements that is more easily"},{text:"awakened within a lade."},{text:"The pages smell like"},{text:"burning pine needles."}],"minecraft:stored_enchantments":{"minecraft:fire_aspect":1},"minecraft:custom_data":{atrium_fire_aspect_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_flame_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The art within depicts"},{text:"wars of days long past;"},{text:"urning buildings, scorched"},{text:"crop fields."},{text:"Use this power carefully,"},{text:"lest your deeds join them."}],"minecraft:stored_enchantments":{"minecraft:flame":1},"minecraft:custom_data":{atrium_flame_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_multishot_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Stolen from a Woodland"},{text:"Mansion, this conjuration"},{text:"originally meant for pillaging"},{text:"could e used for good."},],"minecraft:stored_enchantments":{"minecraft:multishot":1},"minecraft:custom_data":{atrium_multishot_storybook:1b}}}}
# Jungle
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_feather_falling_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:10},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An air-ased enchantment,"},{text:"very useful for falling out"},{text:"of tall trees."}],"minecraft:stored_enchantments":{"minecraft:feather_falling":1},"minecraft:custom_data":{atrium_feather_falling_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_projectile_protection_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:8},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The front page features"},{text:"a drawing of a heroic"},{text:"villager locking a volley"},{text:"of arrows with their shield."}],"minecraft:stored_enchantments":{"minecraft:projectile_protection":1},"minecraft:custom_data":{atrium_projectile_protection_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_power_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"While this aura will"},{text:"make the owstring much"},{text:"harder to draw, the ability"},{text:"to pierce your opponent's"},{text:"defenses is worth it."}],"minecraft:stored_enchantments":{"minecraft:power":1},"minecraft:custom_data":{atrium_power_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_density_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Despite its low page count,"},{text:"this tome is especially"},{text:"heavy. Dropping from"},{text:"great heights is the"},{text:"ackbone of jungle warfare."},],"minecraft:stored_enchantments":{"minecraft:density":1},"minecraft:custom_data":{atrium_density_storybook:1b}}}}
# Swamp
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_depth_strider_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Trudging through the mud"},{text:"is time consuming, after all."},{text:"No wonder they found a"},{text:"way to improve water travel."}],"minecraft:stored_enchantments":{"minecraft:depth_strider":1},"minecraft:custom_data":{atrium_depth_strider_storyook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_respiration_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The cover features a"},{text:"column of ubbles emerging"},{text:"from a bottle."}],"minecraft:stored_enchantments":{"minecraft:vanishing_curse":1},"minecraft:custom_data":{atrium_curse_of_vanishing_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_curse_of_vanishing_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"This cursed tome is locked"},{text:"with a padlock. The ack"},{text:"cover details several"},{text:"warnings against reading it"},{text:"while holding things you"},{text:"care about."}],"minecraft:stored_enchantments":{"minecraft:respiration":1},"minecraft:custom_data":{atrium_respiration_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_lure_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Contains knowledge of local"},{text:"fishing practices, recipes for"},{text:"new types of ait, and"},{text:"a magical fish-attraction charm."}],"minecraft:stored_enchantments":{"minecraft:lure":1},"minecraft:custom_data":{atrium_lure_storybook:1b}}}}
#
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_shard_touch_research:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:paper",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_codex_research"]},"minecraft:item_name":{text:"Runic Research"},"minecraft:lore":[{"color":"gray","italic":false,"text":"Runic Codex Formulas:","underlined":true},{"color":"gray","italic":false,"text":"Shard Touch [Enchantment]"}],"minecraft:custom_data":{atrium_research:1,atrium_research_type:"runic",atrium_topic:"shard_touch"}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_sentinel_research:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:paper",count:1,components:{"minecraft:custom_model_data":{strings:["atrium_codex_research"]},"minecraft:item_name":{text:"Runic Research"},"minecraft:lore":[{"color":"gray","italic":false,"text":"Runic Codex Formulas:","underlined":true},{"color":"gray","italic":false,"text":"Sentinel [Enchantment]"}],"minecraft:custom_data":{atrium_research:1,atrium_research_type:"runic",atrium_topic:"sentinel"}}}}
# Level 4
# Upgrades are offered according to Village Rebalance biome types - this is the only way to apply higher level enchantments than are normally allowed
# as enchanted books will default to the highest level available when used in an anvil.
# Desert
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_efficiency_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"Contains a plethora of"},{text:"information aout different"},{text:"rock and soil compositions,"},{text:"efficient digging techniques,"},{text:"and, of course, magic."}],"minecraft:stored_enchantments":{"minecraft:efficiency":3},"minecraft:custom_data":{atrium_efficiency_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_thorns:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:42},buyB:{id:"minecraft:diamond_chestplate",count:1},sell:{id:"minecraft:diamond_chestplate",count:1,components:{"minecraft:enchantments":{"minecraft:thorns":4}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_sentinel_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"This shield-only enchantment"},{text:"allows the couragous to"},{text:"protect the vulnerale with"},{text:"greater ease."}],"minecraft:stored_enchantments":{"atrium:sentinel":1},"minecraft:custom_data":{atrium_sentinel_storybook:1b}}}}
# Plains
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_protection_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A powerful ward, similar"},{text:"to the magic animating"},{text:"and protecting Iron Golems."}],"minecraft:stored_enchantments":{"minecraft:protection":3},"minecraft:custom_data":{atrium_protection_storyook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_smite:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:42},buyB:{id:"minecraft:diamond_sword",count:1},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:enchantments":{"minecraft:smite":6}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fuse_cutter_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A fuse-seeking enchantment"},{text:"used for quickly disarming"},{text:"explosives. One wonders"},{text:"what divergent evolution"},{text:"made this necessary."}],"minecraft:stored_enchantments":{"atrium:fuse_cutter":1},"minecraft:custom_data":{atrium_fuse_cutter_storyook:1b}}}}
# Savanna
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_sharpness_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An instruction manual"},{text:"laying out the proper care"},{text:"for a lade, including"},{text:"a section on the history"},{text:"of whetstones."},{text:"Oh, and it's enchanted, too."}],"minecraft:stored_enchantments":{"minecraft:sharpness":3},"minecraft:custom_data":{atrium_sharpness_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_knockback:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},buyB:{id:"minecraft:diamond_sword",count:1},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:enchantments":{"minecraft:knockback":3}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_concentration_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:16},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An instruction manual"},{text:"laying out the proper care"},{text:"for a lade, including"},{text:"a section on the history"},{text:"of whetstones."},{text:"Oh, and it's enchanted, too."}],"minecraft:stored_enchantments":{"atrium:concentration":1},"minecraft:custom_data":{atrium_concentration_storybook:1b}}}}
# Snow
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_silk_touch_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The margins are full"},{text:"of scribled notes, all"},{text:"written in illager."}],"minecraft:stored_enchantments":{"minecraft:silk_touch":1},"minecraft:custom_data":{atrium_silk_touch_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_looting:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:42},buyB:{id:"minecraft:diamond_sword",count:1},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:enchantments":{"minecraft:looting":4}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_shard_touch_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"An innovation orne of the"},{text:"Runic Codex, this delicate"},{text:"incantation allows a miner to"},{text:"extract crystals without damaging"},{text:"their magical properties."}],"minecraft:stored_enchantments":{"atrium:shard_touch":1},"minecraft:custom_data":{atrium_shard_touch_storybook:1b}}}}
# Taiga
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fortune_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:28},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"A luck charm. Ironically,"},{text:"creating it requires a lot of"},{text:"luck to pull it off."}],"minecraft:stored_enchantments":{"minecraft:blast_protection":1},"minecraft:custom_data":{atrium_fortune_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_fire_aspect:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},buyB:{id:"minecraft:diamond_sword",count:1},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:enchantments":{"minecraft:fire_aspect":3}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_smelting_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:24},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The arcane secrets of the"},{text:"stone-dwarves are ound"},{text:"here, a relic of those"},{text:"forced to abandon their mines."}],"minecraft:stored_enchantments":{"atrium:smelting":1},"minecraft:custom_data":{atrium_smelting_storybook:1b}}}}
# Jungle
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_unbreaking_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"The writer ponders whether"},{text:"this enchantment could e"},{text:"applied to larger objects,"},{text:"such as components of walls."}],"minecraft:stored_enchantments":{"minecraft:unbreaking":2},"minecraft:custom_data":{atrium_unbreaking_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_feather_falling:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},buyB:{id:"minecraft:diamond_boots",count:1},sell:{id:"minecraft:diamond_boots",count:1,components:{"minecraft:enchantments":{"minecraft:feather_falling":5}}}}
# Swamp
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_mending_storybook:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:12,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:42},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":[{text:"This precious tome contains"},{text:"a story of death and reirth."},{text:"Its magic is very rare,"},{text:"and it is considered a"},{text:"great treasure."}],"minecraft:stored_enchantments":{"minecraft:mending":1},"minecraft:custom_data":{atrium_mending_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_upgrade_impossible_respiration:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.2f,buy:{id:"minecraft:emerald",count:32},buyB:{id:"minecraft:diamond_helmet",count:1},sell:{id:"minecraft:diamond_helmet",count:1,components:{"minecraft:enchantments":{"minecraft:respiration":4}}}}
#
# Level 5
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_runic_codex:1b}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:true,maxUses:1,xp:4,priceMultiplier:0.15f,buy:{id:"minecraft:emerald",count:36},buyB:{id:"minecraft:enchanting_table",count:1},sell:{id:"minecraft:player_head",count:1,components:{"minecraft:lore":[{text:"Space Required:","color":"gray","italic":false},{text:"x9,y3,z7","color":"dark_gray","italic":false},{text:" "},{text:"When Placed:","color":"gray","italic":false},{text:"Generates a structure ","color":"blue","italic":false}],"minecraft:item_name":{text:"Runic Codex"},"minecraft:profile":{id:[I;453648658,-1501608406,-1743325056,-1172242773],properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTUyNjgwNzc0MDkwYTVjZDFjNmZkMDgwYjZkNGFkOTkwZWViYzA0MTE4MjBlMTkyNmM5OWIyMTExZTJjYjRiNyJ9fX0="}]},"minecraft:custom_data":{runic_codex_placer:1b}}}}