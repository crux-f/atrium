# Swaps out items for trades
# (Loot tables are always checking for the previous level)
# Level 2
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_aqua_affinity_storybook:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:3,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:12},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":['{"text":"This book contains"}','{"text":"eldritch runes, interspersed"}','{"text":"with excited observations"}','{"text":"about marine biology."}'],"minecraft:stored_enchantments":{levels:{"minecraft:aqua_affinity":1}},"minecraft:custom_data":{atrium_aqua_affinity_storybook:1b}}}}
# execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_shard_touch_pickaxe:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:4,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:5},buyB:{id:"minecraft:golden_pickaxe",count:1},sell:{id:"minecraft:golden_pickaxe",count:1b,components:{RepairCost:3,Enchantments:[{}],display:{Lore:['{"text":"Shard Touch","italic":false,"color":"gray"}']},atrium_custom_enchantment:1b,atrium_shard_touch_enchanted:1b}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_sell_1_enchantment_catalyst_focusing:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:16,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:lapis_block",count:1,components:{"minecraft:enchantment_glint_override":true,"minecraft:lore":['{"text":"Focusing","color":"blue","italic":false}','{"text":" "}','{"text":"Now that you have an"}','{"text":"enchantment you understand,"}','{"text":"it shouldn\'t be too difficult"}','{"text":"to turn up the power a little..."}'],"minecraft:item_name":'{"text":"Enchantment Catalyst"}',"minecraft:custom_data":{atrium_catalyst_focusing:1b}}},sell:{id:"minecraft:emerald",count:8b}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_sell_1_enchantment_catalyst_transforming:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:8,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:diamond_block",count:1,components:{"minecraft:enchantment_glint_override":true,"minecraft:lore":['{"text":"Transforming","color":"dark_aqua","italic":false}','{"text":" "}','{"text":"Diamonds change the equation,"}','{"text":"somehow. It\'s the basis of"}','{"text":"this whole process. Now"}','{"text":"all you have to figure out"}','{"text":"is... Why."}'],"minecraft:item_name":'{"text":"Enchantment Catalyst"}',"minecraft:custom_data":{atrium_catalyst_transforming:1b}}},sell:{id:"minecraft:emerald",count:16b}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_silk_touch_storybook:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:3,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":['{"text":"The margins are full"}','{"text":"of scribbled notes, all"}','{"text":"written in illager."}'],"minecraft:stored_enchantments":{levels:{"minecraft:silk_touch":1}},"minecraft:custom_data":{atrium_silk_touch_storybook:1b}}}}
# Level 3
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_infinity_storybook:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:3,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:40},sell:{id:"minecraft:enchanted_book",count:1,components:{"minecraft:lore":['{"text":"Reading it makes your"}','{"text":"head spin. Maybe that\'s"}','{"text":"why the book has a padlock."}'],"minecraft:stored_enchantments":{levels:{"minecraft:infinity":1}},"minecraft:custom_data":{atrium_infinity_storybook:1b}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_shard_touch_research:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:paper",count:1,components:{"minecraft:custom_model_data":333002,"minecraft:item_name":"Runic Research","minecraft:lore":['{"color":"gray","italic":false,"text":"Runic Codex Formulas:","underlined":true}','{"color":"gray","italic":false,"text":"Shard Touch [Enchantment]"}'],"minecraft:custom_data":{atrium_research:1b,atrium_research_type:"runic",atrium_topic:"shard_touch"}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_sentinel_research:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:20},sell:{id:"minecraft:paper",count:1,components:{"minecraft:custom_model_data":333002,"minecraft:item_name":"Runic Research","minecraft:lore":['{"color":"gray","italic":false,"text":"Runic Codex Formulas:","underlined":true}','{"color":"gray","italic":false,"text":"Sentinel [Enchantment]"}'],"minecraft:custom_data":{atrium_research:1b,atrium_research_type:"runic",atrium_topic:"sentinel"}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_unbreaking_5_pickaxe:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:45},buyB:{id:"minecraft:diamond_pickaxe",count:1},sell:{id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:unbreaking":5}}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_unbreaking_5_axe:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:40},buyB:{id:"minecraft:diamond_axe",count:1},sell:{id:"minecraft:diamond_axe",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:unbreaking":5}}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_unbreaking_5_shovel:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:35},buyB:{id:"minecraft:diamond_shovel",count:1},sell:{id:"minecraft:diamond_shovel",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:unbreaking":5}}}}}
# Level 3 or 4
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_mending_trident:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:15},buyB:{id:"minecraft:trident",count:1},sell:{id:"minecraft:trident",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:mending":1}}}}}
# Level 4
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_thorns_5_chestplate:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:52},buyB:{id:"minecraft:diamond_chestplate",count:1},sell:{id:"minecraft:diamond_chestplate",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:thorns":5}}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fire_aspect_3_sword:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:48},buyB:{id:"minecraft:diamond_sword",count:1},sell:{id:"minecraft:diamond_sword",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:fire_aspect":3}}}}}
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_fortune_4_pickaxe:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.05f,buy:{id:"minecraft:emerald",count:64},buyB:{id:"minecraft:diamond_pickaxe",count:1},sell:{id:"minecraft:diamond_pickaxe",count:1,components:{"minecraft:enchantments":{levels:{"minecraft:fortune":4}}}}}
# Level 5
execute if data entity @s {Inventory:[{components:{"minecraft:custom_data":{atrium_buy_1_runic_codex:1}}}]} run data modify entity @s Offers.Recipes append value {rewardExp:1b,maxUses:1,xp:4,priceMultiplier:0.15f,buy:{id:"minecraft:emerald",count:36},buyB:{id:"minecraft:enchantment_table",count:1},sell:{id:"minecraft:player_head",count:1,components:{"minecraft:lore":['{"text":"Space Required:","color":"gray","italic":false}','{"text":"x9,y6,z10","color":"dark_gray","italic":false}','{"text":" "}','{"text":"When Placed:","color":"gray","italic":false}','{"text":"Generates a structure ","color":"blue","italic":false}'],"minecraft:item_name":'{"text":"Runic Codex"}',"minecraft:profile":{id:[I;453648658,-1501608406,-1743325056,-1172242773],name:"",properties:[{name:"textures",value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTUyNjgwNzc0MDkwYTVjZDFjNmZkMDgwYjZkNGFkOTkwZWViYzA0MTE4MjBlMTkyNmM5OWIyMTExZTJjYjRiNyJ9fX0="}]},"minecraft:custom_data":{runic_codex_placer:1b}}}}