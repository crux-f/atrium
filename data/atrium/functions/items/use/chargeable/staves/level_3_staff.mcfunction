# Runs from hold_chargeable_item
#
# If there are items in the two left-most slot and the right-most slot of your hotbar that are not power slots, drop them.
# If there is an item in the center slot, drop it too.
execute if data entity @s {Inventory:[{Slot:0b}]} unless data entity @s {Inventory:[{Slot:0b,tag:{atrium_power:1b}}]} run function atrium:items/slot_control/drop_item_0
execute if data entity @s {Inventory:[{Slot:8b}]} unless data entity @s {Inventory:[{Slot:8b,tag:{atrium_power:1b}}]} run function atrium:items/slot_control/drop_item_8
execute if data entity @s {Inventory:[{Slot:1b}]} unless data entity @s {Inventory:[{Slot:1b,tag:{atrium_power:1b}}]} run function atrium:items/slot_control/drop_item_1
execute if data entity @s {Inventory:[{Slot:7b}]} unless data entity @s {Inventory:[{Slot:7b,tag:{atrium_power:1b}}]} run function atrium:items/slot_control/drop_item_7
execute if data entity @s {Inventory:[{Slot:4b}]} unless data entity @s {Inventory:[{Slot:4b,tag:{atrium_power:1b}}]} run function atrium:items/slot_control/drop_item_4
# ^ These are for new spells later
# Now that the slots are empty (items cannot be picked up again for 2 ticks), give the caster their spell options.
#
#
# Air | Slot 0: Air Sigil III | Slot 8: Increase Velocity III | Slot 1: Inhale II | Slot 7: Exhale II | Slot 4: Dance
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_air_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Air Sigil III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"A 1-block radius wind column"}','{"text":"is created at your location for"}','{"text":"24 seconds. The column"}','{"text":"levitates entities for "}','{"text":"4.5 seconds each time they enter"}','{"text":"the column. Additionally,"}','{"text":"the column causes arrows"}','{"text":"that fly into it to be"}','{"text":"thrown directly upwards."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333004} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_air_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Increase Velocity III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Grants the caster Jump Boost III"}','{"text":"for 120 seconds, or Speed III"}','{"text":"for 120 seconds if the caster"}','{"text":"is Sprinting."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333005} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_air_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Inhale II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"This spell creates a blast"}','{"text":"of air in a line 8.5 blocks"}','{"text":"long and 2.5 blocks wide"}','{"text":"emenating from the caster."}','{"text":"Non-player entities caught"}','{"text":"in the line are dragged"}','{"text":"towards the caster."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333016} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_air_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Exhale II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"This spell creates a blast"}','{"text":"of air in a line 8.5 blocks"}','{"text":"long and 2.5 blocks wide"}','{"text":"emenating from the caster."}','{"text":"Non-player entities caught"}','{"text":"in the line thrown away"}','{"text":"from the caster."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333017} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_air_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Dance","color":"yellow","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Imbues the caster with"}','{"text":"the power of flight. When cast,"}','{"text":"you leap into the air and"}','{"text":"dance, bouncing 10 times."}','{"text":"You need not hold the staff to"}','{"text":"maintain this effect."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333028} 1
#
# Earth | Slot 0: Earth Sigil III | Slot 8: Natural Armor III | Slot 1: Locate Ore II | Slot 7: Conjure Tree II | Slot 4: Return
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_earth_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Earth Sigil III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Ask the little stone sprites "}','{"text":"for help. They idle for "}','{"text":"36 seconds, and anyone "}','{"text":"who stands near them gains "}','{"text":"Haste II for 8 minutes."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333006} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_earth_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Natural Armor III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"This spell grants you magical"}','{"text":"armor. Provided you are"}','{"text":"not wearing physical"}','{"text":"armor, you gain Resistance III"}','{"text":"for 60 minutes."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333007}
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_earth_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Locate Ore II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Sends out vibrations in a 15x15"}','{"text":"cube centered on the caster."}','{"text":"Any ore blocks within the"}','{"text":"cube are illuminated for"}','{"text":"30 seconds, allowing the"}','{"text":"caster to easily locate them."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333018} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_earth_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Conjure Tree II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Conjures a small tree, as the"}','{"text":"name might imply. The conjured"}','{"text":"tree is fleeting, and will"}','{"text":"vanish after 5 minutes of life."}','{"text":"This spell may only conjure"}','{"text":"trees and tree-like plants"}','{"text":"if the ground in front of the"}','{"text":"caster can support such growth."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333019} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_earth_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Return","color":"green","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Captures the location where"}','{"text":"the spell is cast. The "}','{"text":"next time you cast"}','{"text":"it, this spell returns"}','{"text":"you to that exact point."}','{"text":"This spell can take you"}','{"text":"back to any dimension"}','{"text":"except The Nether."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333029} 1
#
# Fire | Slot 0: Fire Sigil III | Slot 8: Throw Flames III | Slot 1: Flare II | Slot 7: Stoke Furnace II | Slot 4: Meteor
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_fire_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Fire Sigil III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Burns a symbol into the ground"}','{"text":"on casting. 12 seconds later,"}','{"text":"it bursts into flame in a "}','{"text":"3-block radius; Any entities "}','{"text":"caught in the radius"}','{"text":"are set on fire."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333008} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_fire_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Throw Flames III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"You hurl flames at your foes."}','{"text":"Any entity in a 12-block cone "}','{"text":"in front of you is set on fire."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333009}
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_fire_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Flare II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Creates a flare above the"}','{"text":"caster\'s head that illuminates"}','{"text":"the area for 5 minutes."}','{"text":"The flare cannot be extinguished"}','{"text":"by water, but goes out"}','{"text":"if a block is placed on it."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333020} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_fire_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Stoke Furnace II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Causes the flames within"}','{"text":"a single Furnace, Blast Furnace"}','{"text":"or Smoker in front of the"}','{"text":"caster to burn hotter; The spell"}','{"text":"fuels the block as much"}','{"text":"as two Lava Buckets would."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333021} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_fire_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Meteor","color":"red","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Conjures a meteor hovering"}','{"text":"in front of you. The meteor"}','{"text":"can be struck like a"}','{"text":"Ghast\'s fireball to propel"}','{"text":"it in a direction of your"}','{"text":"choice. The meteor detonates"}','{"text":"on impact with a force equal"}','{"text":"to a Creeper explosion."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333030} 1
#
# Water | Slot 0: Water Sigil III | Slot 8: Extinguish III | Slot 1: Turn Tide II | Slot 7: Undercurrent II| Slot 4: Refresh
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_water_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Water Sigil III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Summons a raincloud that lasts"}','{"text":"5 minutes. While the rain falls,"}','{"text":"Beets, Carrots, Potatoes"}','{"text":"and Wheat grow at an"}','{"text":"accelerated rate within a"}','{"text":"3x3 square."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333010} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_water_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Extinguish III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Any entities within a 15-block"}','{"text":"radius of the caster that"}','{"text":"are burning are extinguished."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333011}
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_water_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Turn Tide II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Heals one living target"}','{"text":"within 6 blocks of the"}','{"text":"caster that is touching Water."}','{"text":"The target restores 8 of its"}','{"text":"lost Hearts and is cured"}','{"text":"of any Poison affecting it."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333022} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_water_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Undercurrent II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Creates a bubble column which"}','{"text":"pushes the caster upwards,"}','{"text":"or pulls the caster downwards"}','{"text":"if the caster is Sneaking."}','{"text":"This spell has no effect"}','{"text":"unless the caster is underwater."}','{"text":"Upon reaching level II, this"}','{"text":"spell also grants Dolphin\'s Grace for 10 seconds."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333023} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_water_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Refresh","color":"blue","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Restores 2 Hearts to any"}','{"text":"living entities within 15 blocks"}','{"text":"and grants them Regeneration III"}','{"text":"for an additional 8 seconds."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333031} 1
#
# Time | Slot 0: Time Sigil III | Slot 8: Desync III | Slot 1: Extend Duration II | Slot 7: Rewind Item II | Slot 4: Moment
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_time_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Time Sigil III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Conjures a symbol of power."}','{"text":"12 seconds after casting,"}','{"text":"each entity within a"}','{"text":"3-block radius of the sigil"}','{"text":"is afflicted with Slowness IV"}','{"text":"and gains Slow Falling."}','{"text":"Both effects last for"}','{"text":"50 seconds."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333012} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_time_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Desync III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Creates a circle of slow time."}','{"text":"Entities that enter the"}','{"text":"outside of the circle"}','{"text":" are afflicted with"}','{"text":"Slowness III, while entities"}','{"text":"in the center of the circle"}','{"text":"gain Speed II."}','{"text":"The circle lasts 30 seconds."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333013}
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_time_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Extend Duration II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Slows an aspect of your"}','{"text":"metabolism; The effects of the"}','{"text":"next potion you drink will"}','{"text":"last for double its"}','{"text":"listed duration."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333024} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_time_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Rewind Item II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"3 seconds after casting,"}','{"text":"sends the item you hold"}','{"text":"back in time; The item has"}','{"text":"100% of its durability restored."}','{"text":"Each time you cast this"}','{"text":"on the same item, the amount"}','{"text":"of durability restored"}','{"text":"is reduced by 10%."}','{"text":"Unfortunately, this comes at a"}','{"text":"cost; The item is enchanted"}','{"text":"with Curse of Vanishing."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333025} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_time_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Moment","color":"light_purple","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"This spell removes a"}','{"text":"single second from time,"}','{"text":"stopping the motion of"}','{"text":"all entities other than you"}','{"text":"in a 30-block radius in their"}','{"text":"tracks. This disruption is extremely"}','{"text":"disorienting, and it takes 16"}','{"text":"seconds for an entity to"}','{"text":"move at normal speed again."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333032} 1
#
# Space | Slot 0: Space Sigil III | Slot 8: Parallax III | Slot 1: Arcane Ward II | Slot 7: Pocket Item II | Slot 4: Elsewhere
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_space_staff:1b}}]} run item replace entity @s hotbar.0 with minecraft:firework_star{display:{Name:'{"text":"Spell: Space Sigil II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Etches an arcane anchor"}','{"text":"into the ground. 20 seconds"}','{"text":"later space folds itself,"}','{"text":"returning you to the sigil"}','{"text":"instantly."}']},atrium_power_slot:0b,atrium_power:1b,CustomModelData:333014} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_space_staff:1b}}]} run item replace entity @s hotbar.8 with minecraft:firework_star{display:{Name:'{"text":"Spell: Parallax III","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Banishes one entity you are"}','{"text":"looking at within 3 blocks"}','{"text":"to a pocket dimension for "}','{"text":"10 seconds."}']},atrium_power_slot:8b,atrium_power:1b,CustomModelData:333015}
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_space_staff:1b}}]} run item replace entity @s hotbar.1 with minecraft:firework_star{display:{Name:'{"text":"Spell: Arcane Ward II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"Creates a 5x5 wall of"}','{"text":"force 3 blocks ahead of"}','{"text":"where the caster is looking."}','{"text":"This wall lasts for 20"}','{"text":"seconds before vanishing."}']},atrium_power_slot:1b,atrium_power:1b,CustomModelData:333026} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_space_staff:1b}}]} run item replace entity @s hotbar.7 with minecraft:firework_star{display:{Name:'{"text":"Spell: Pocket Item II","color":"gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"3 seconds after casting,"}','{"text":"transfers items to or"}','{"text":"from a pocket dimension;"}','{"text":"The item is teleported"}','{"text":"into the first available"}','{"text":"slot in your Ender Chest."}','{"text":"If you are Sneaking, it"}','{"text":"takes the first available"}','{"text":"item out instead."}']},atrium_power_slot:7b,atrium_power:1b,CustomModelData:333027} 1
execute if data entity @s {Inventory:[{Slot:-106b,tag:{atrium_space_staff:1b}}]} run item replace entity @s hotbar.4 with minecraft:firework_star{display:{Name:'{"text":"Spell: Elsewhere","color":"dark_gray","italic":false}',Lore:['{"text":"When Cast:","color":"gray","italic":false}','{"text":"3 seconds after casting,"}','{"text":"you walk between the seams"}','{"text":"that hold together this world,"}','{"text":"finding yourself in another."}','{"text":"If you are holding a"}','{"text":"crystal block from a"}','{"text":"specific world, this spell"}','{"text":"will take you to that world."}','{"text":"Otherwise, it will take you"}','{"text":"to The Overworld."}']},atrium_power_slot:4b,atrium_power:1b,CustomModelData:333033} 1